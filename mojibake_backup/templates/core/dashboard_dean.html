{% extends 'base.html' %}
{% block title %}Р“Р»Р°РІРЅР°СЏ{% endblock %}
{% block content %}
<div class="row mt-4">
    <div class="col-12">
        <h2>Р”РѕР±СЂРѕ РїРѕР¶Р°Р»РѕРІР°С‚СЊ, {{ user.get_full_name }}!</h2>
        <p class="text-muted">РџР°РЅРµР»СЊ РґРµРєР°РЅР°</p>
    </div>
</div>

<div class="row mt-3">
    <div class="col-md-3">
        <div class="card">
            <div class="card-body text-center">
                <i class="bi bi-people-fill" style="font-size: 3rem; color: var(--primary-blue);"></i>
                <h5 class="mt-2">Р’СЃРµРіРѕ СЃС‚СѓРґРµРЅС‚РѕРІ</h5>
                <h3>{{ total_students }}</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body text-center">
                <i class="bi bi-person-badge" style="font-size: 3rem; color: var(--accent-green);"></i>
                <h5 class="mt-2">РџСЂРµРїРѕРґР°РІР°С‚РµР»РµР№</h5>
                <h3>{{ total_teachers }}</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body text-center">
                <i class="bi bi-collection" style="font-size: 3rem; color: var(--accent-amber);"></i>
                <h5 class="mt-2">Р“СЂСѓРїРї</h5>
                <h3>{{ total_groups }}</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card">
            <div class="card-body text-center">
                <i class="bi bi-graph-up" style="font-size: 3rem; color: #10b981;"></i>
                <h5 class="mt-2">РЎСЂРµРґРЅРёР№ Р±Р°Р»Р»</h5>
                <h3>{{ avg_gpa|floatformat:2|default:"вЂ”" }}</h3>
            </div>
        </div>
    </div>
</div>

<!-- РЎС‚Р°С‚РёСЃС‚РёРєР° РїРѕ РєСѓСЂСЃР°Рј -->
<div class="row mt-3">
    <div class="col-12">
        <div class="card">
            <div class="card-header"><i class="bi bi-bar-chart"></i> РЎС‚Р°С‚РёСЃС‚РёРєР° РїРѕ РєСѓСЂСЃР°Рј</div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>РљСѓСЂСЃ</th>
                                <th>Р“СЂСѓРїРї</th>
                                <th>РЎС‚СѓРґРµРЅС‚РѕРІ</th>
                                <th>РЎСЂРµРґРЅРёР№ Р±Р°Р»Р»</th>
                                <th>РџРѕСЃРµС‰Р°РµРјРѕСЃС‚СЊ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for stat in course_stats %}
                            <tr>
                                <td><strong>{{ stat.course }} РєСѓСЂСЃ</strong></td>
                                <td>{{ stat.groups_count }}</td>
                                <td>{{ stat.students_count }}</td>
                                <td>
                                    <span class="badge {% if stat.avg_gpa >= 7 %}bg-success{% elif stat.avg_gpa >= 4 %}bg-warning{% else %}bg-danger{% endif %}">
                                        {{ stat.avg_gpa|floatformat:2 }}
                                    </span>
                                </td>
                                <td>
                                    <span class="badge {% if stat.avg_attendance >= 80 %}bg-success{% elif stat.avg_attendance >= 60 %}bg-warning{% else %}bg-danger{% endif %}">
                                        {{ stat.avg_attendance|floatformat:0 }}%
                                    </span>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5" class="text-center text-muted">РќРµС‚ РґР°РЅРЅС‹С…</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Р‘С‹СЃС‚СЂС‹Рµ РґРµР№СЃС‚РІРёСЏ -->
<div class="row mt-3">
    <div class="col-12">
        <div class="card">
            <div class="card-header"><i class="bi bi-speedometer2"></i> Р‘С‹СЃС‚СЂС‹Рµ РґРµР№СЃС‚РІРёСЏ</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <a href="{% url 'accounts:user_management' %}" class="btn btn-primary w-100 mb-2">
                            <i class="bi bi-people"></i><br>РЈРїСЂР°РІР»РµРЅРёРµ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏРјРё
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'accounts:group_management' %}" class="btn btn-primary w-100 mb-2">
                            <i class="bi bi-collection"></i><br>РЈРїСЂР°РІР»РµРЅРёРµ РіСЂСѓРїРїР°РјРё
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'schedule:constructor' %}" class="btn btn-primary w-100 mb-2">
                            <i class="bi bi-calendar3"></i><br>РљРѕРЅСЃС‚СЂСѓРєС‚РѕСЂ СЂР°СЃРїРёСЃР°РЅРёСЏ
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'journal:dean_view' %}" class="btn btn-primary w-100 mb-2">
                            <i class="bi bi-graph-up"></i><br>РђРЅР°Р»РёС‚РёРєР° СѓСЃРїРµРІР°РµРјРѕСЃС‚Рё
                        </a>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-md-3">
                        <a href="{% url 'accounts:add_user' %}" class="btn btn-success w-100 mb-2">
                            <i class="bi bi-plus-circle"></i><br>Р”РѕР±Р°РІРёС‚СЊ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'accounts:add_group' %}" class="btn btn-success w-100 mb-2">
                            <i class="bi bi-plus-circle"></i><br>Р”РѕР±Р°РІРёС‚СЊ РіСЂСѓРїРїСѓ
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'schedule:manage_academic_week' %}" class="btn btn-info w-100 mb-2">
                            <i class="bi bi-calendar-range"></i><br>РЈС‡РµР±РЅС‹Рµ РЅРµРґРµР»Рё
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'schedule:view' %}" class="btn btn-outline-primary w-100 mb-2">
                            <i class="bi bi-calendar-week"></i><br>РџСЂРѕСЃРјРѕС‚СЂ СЂР°СЃРїРёСЃР°РЅРёСЏ
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}