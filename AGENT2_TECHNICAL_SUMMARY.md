# üèóÔ∏è –ê–≥–µ–Ω—Ç 2: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (`schedule`) —Å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º –¥–ª—è –¥–µ–∫–∞–Ω–∞, –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π, –≤–∏–¥–∂–µ—Ç–æ–º "–°–µ–≥–æ–¥–Ω—è" –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤ DOCX.

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è)

```
department_platform/
‚îú‚îÄ‚îÄ accounts/                    # ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ê–≥–µ–Ω—Ç 1)
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ views.py                # üîÑ –ò–ó–ú–ï–ù–ï–ù: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ "–°–µ–≥–æ–¥–Ω—è"
‚îÇ   ‚îî‚îÄ‚îÄ ...                     # –æ—Å—Ç–∞–ª—å–Ω–æ–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ schedule/                    # üÜï –ù–û–í–û–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π –≤ –∞–¥–º–∏–Ω–∫–µ
‚îÇ   ‚îú‚îÄ‚îÄ apps.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models.py               # 4 –º–æ–¥–µ–ª–∏: Subject, ScheduleSlot, ScheduleException, AcademicWeek
‚îÇ   ‚îú‚îÄ‚îÄ forms.py                # –§–æ—Ä–º—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ views.py                # 11 view-—Ñ—É–Ω–∫—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                 # 11 URL-–º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îÇ       ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ base.html               # üîÑ –ò–ó–ú–ï–ù–ï–ù: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard_student.html   # üîÑ –ò–ó–ú–ï–ù–ï–ù: –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤–∏–¥–∂–µ—Ç "–°–µ–≥–æ–¥–Ω—è"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard_teacher.html   # üîÑ –ò–ó–ú–ï–ù–ï–ù: –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤–∏–¥–∂–µ—Ç "–°–µ–≥–æ–¥–Ω—è"
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboard_dean.html      # üîÑ –ò–ó–ú–ï–ù–ï–ù: –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ schedule/               # üÜï –ù–û–í–´–ï –®–ê–ë–õ–û–ù–´
‚îÇ       ‚îú‚îÄ‚îÄ schedule_view.html       # –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Å—Ç—É–¥–µ–Ω—Ç/–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å)
‚îÇ       ‚îú‚îÄ‚îÄ schedule_dean.html       # –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–¥–µ–∫–∞–Ω)
‚îÇ       ‚îú‚îÄ‚îÄ today_widget.html        # –í–∏–¥–∂–µ—Ç "–°–µ–≥–æ–¥–Ω—è"
‚îÇ       ‚îú‚îÄ‚îÄ constructor.html         # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ add_slot.html            # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ edit_slot.html           # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ manage_exceptions.html   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ manage_academic_week.html # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ–±–Ω—ã–º–∏ –Ω–µ–¥–µ–ª—è–º–∏
‚îÇ       ‚îî‚îÄ‚îÄ group_list.html          # –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø —Å–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏
‚îú‚îÄ‚îÄ department_platform/
‚îÇ   ‚îú‚îÄ‚îÄ settings.py             # üîÑ –ò–ó–ú–ï–ù–ï–ù: –¥–æ–±–∞–≤–ª–µ–Ω 'schedule' –≤ INSTALLED_APPS
‚îÇ   ‚îî‚îÄ‚îÄ urls.py                 # üîÑ –ò–ó–ú–ï–ù–ï–ù: –¥–æ–±–∞–≤–ª–µ–Ω path('schedule/', ...)
‚îî‚îÄ‚îÄ requirements.txt            # üîÑ –ò–ó–ú–ï–ù–ï–ù: –¥–æ–±–∞–≤–ª–µ–Ω python-docx
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ (`schedule/models.py`)

#### **Subject** - –ü—Ä–µ–¥–º–µ—Ç—ã
```python
- name: CharField (–Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞)
- code: CharField (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥)
- type: CharField (LECTURE/PRACTICE/SRSP)
- hours_per_semester: IntegerField
- teacher: ForeignKey(Teacher) - —Å–≤—è–∑—å —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º
- description: TextField
```

#### **ScheduleSlot** - –°–ª–æ—Ç—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```python
- group: ForeignKey(Group)
- subject: ForeignKey(Subject)
- teacher: ForeignKey(Teacher)
- day_of_week: IntegerField (0-5: –ü–Ω-–°–±)
- start_time: TimeField
- end_time: TimeField
- classroom: CharField
- is_active: BooleanField

–ú–µ—Ç–æ–¥: get_color_class() ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 'primary'/'success'/'warning'
```

#### **ScheduleException** - –ò—Å–∫–ª—é—á–µ–Ω–∏—è
```python
- schedule_slot: ForeignKey(ScheduleSlot)
- exception_date: DateField
- exception_type: CharField (CANCEL/RESCHEDULE)
- reason: TextField
- new_date, new_start_time, new_end_time, new_classroom: –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
- created_by: ForeignKey(User)

unique_together: ['schedule_slot', 'exception_date']
```

#### **AcademicWeek** - –£—á–µ–±–Ω—ã–µ –Ω–µ–¥–µ–ª–∏
```python
- semester_start_date: DateField
- current_week: IntegerField (1-20)
- is_active: BooleanField

–ú–µ—Ç–æ–¥—ã:
- calculate_current_week() ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –Ω–µ–¥–µ–ª–∏
- get_current() [classmethod] ‚Üí –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ–º–µ—Å—Ç—Ä
- save() ‚Üí –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ —Å–µ–º–µ—Å—Ç—Ä—ã –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ
```

### 2. View-—Ñ—É–Ω–∫—Ü–∏–∏ (`schedule/views.py`)

| –§—É–Ω–∫—Ü–∏—è | URL | –†–æ–ª–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|------|----------|
| `schedule_view` | `/schedule/` | –í—Å–µ | –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è |
| `today_classes` | `/schedule/today/` | –í—Å–µ | –í–∏–¥–∂–µ—Ç "–°–µ–≥–æ–¥–Ω—è" |
| `schedule_constructor` | `/schedule/constructor/` | –î–µ–∫–∞–Ω | –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å —Å–µ—Ç–∫–æ–π |
| `add_schedule_slot` | `/schedule/slot/add/` | –î–µ–∫–∞–Ω | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è |
| `edit_schedule_slot` | `/schedule/slot/<id>/edit/` | –î–µ–∫–∞–Ω | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `delete_schedule_slot` | `/schedule/slot/<id>/delete/` | –î–µ–∫–∞–Ω | –£–¥–∞–ª–µ–Ω–∏–µ |
| `manage_exceptions` | `/schedule/slot/<id>/exceptions/` | –î–µ–∫–∞–Ω | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏ |
| `delete_exception` | `/schedule/exception/<id>/delete/` | –î–µ–∫–∞–Ω | –£–¥–∞–ª–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è |
| `manage_academic_week` | `/schedule/academic-week/` | –î–µ–∫–∞–Ω | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–µ–ª—è–º–∏ |
| `export_schedule` | `/schedule/export/` | –í—Å–µ | –≠–∫—Å–ø–æ—Ä—Ç –≤ DOCX |
| `group_list` | `/schedule/groups/` | –ü—Ä–µ–ø/–î–µ–∫–∞–Ω | –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ |

**–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã:**
- `@login_required` - –¥–ª—è –≤—Å–µ—Ö
- `@user_passes_test(is_dean)` - —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ–∫–∞–Ω–∞
- –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–æ–ª—è–º –≤–Ω—É—Ç—Ä–∏ view

### 3. –õ–æ–≥–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

**–°—Ç—É–¥–µ–Ω—Ç:**
```python
student.group ‚Üí filter(group=group, is_active=True)
```

**–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å:**
```python
teacher_profile ‚Üí filter(teacher=teacher, is_active=True)
```

**–î–µ–∫–∞–Ω:**
```python
GET –ø–∞—Ä–∞–º–µ—Ç—Ä 'group' ‚Üí filter(group=selected_group)
```

### 4. –í–∏–¥–∂–µ—Ç "–°–µ–≥–æ–¥–Ω—è" (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `core/views.py`:**
```python
# –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ dashboard():
today = datetime.now()
day_of_week = today.weekday()  # 0-6 (–ü–Ω-–í—Å)

classes = ScheduleSlot.objects.filter(
    group=student.group,  # –∏–ª–∏ teacher=teacher
    day_of_week=day_of_week,
    is_active=True
)

context['classes'] = classes
context['current_time'] = current_time
context['today'] = today
```

**–í –¥–∞—à–±–æ—Ä–¥–∞—Ö:**
```django
{% include 'schedule/today_widget.html' %}
```

### 5. –≠–∫—Å–ø–æ—Ä—Ç –≤ DOCX

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** `python-docx`

**–õ–æ–≥–∏–∫–∞:**
```python
from docx import Document

doc = Document()
doc.add_heading(f'–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã {group.name}', 0)

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã 7 —Å—Ç–æ–ª–±—Ü–æ–≤ (–í—Ä–µ–º—è + 6 –¥–Ω–µ–π)
table = doc.add_table(rows=1, cols=7)

# –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ –ø–æ –¥–Ω—è–º –∏ –≤—Ä–µ–º–µ–Ω–∏
schedule_by_day_time = {
    "08:30-10:00": {0: slot1, 1: None, ...},
    ...
}

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ HttpResponse
```

### 6. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
```python
time_slots = [
    ('08:30', '10:00'),
    ('10:10', '11:40'),
    ('12:10', '13:40'),
    ('13:50', '15:20'),
    ('15:30', '17:00'),
    ('17:10', '18:40'),
]
```

**–°–µ—Ç–∫–∞:**
```python
schedule_grid = {
    0: {('08:30', '10:00'): slot_object, ...},  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
    1: {...},  # –í—Ç–æ—Ä–Ω–∏–∫
    ...
}
```

**HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –¢–∞–±–ª–∏—Ü–∞ –¥–Ω–∏ √ó –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã
- –ö–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏–±–æ –∑–∞–Ω—è—Ç–∏–µ, –ª–∏–±–æ –ø—É—Å—Ç–∞—è
- Hover —ç—Ñ—Ñ–µ–∫—Ç ‚Üí –ø–æ–∫–∞–∑ –∫–Ω–æ–ø–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è

### 7. –°–∏—Å—Ç–µ–º–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
2. –ï—Å–ª–∏ `exception_type == 'CANCEL'` ‚Üí –∑–∞–Ω—è—Ç–∏–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
3. –ï—Å–ª–∏ `exception_type == 'RESCHEDULE'` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è/–º–µ—Å—Ç–æ

**–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:** –û–¥–Ω–∞ –¥–∞—Ç–∞ = –æ–¥–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª–æ—Ç–∞

### 8. –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è

```python
def get_color_class(self):
    return {
        'LECTURE': 'primary',    # –°–∏–Ω–∏–π
        'PRACTICE': 'success',   # –ó–µ–ª–µ–Ω—ã–π
        'SRSP': 'warning'        # –û—Ä–∞–Ω–∂–µ–≤—ã–π
    }.get(self.subject.type, 'secondary')
```

CSS –∫–ª–∞—Å—Å—ã Bootstrap: `bg-primary`, `bg-success`, `bg-warning`

### 9. –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

**Desktop (d-none d-md-block):**
- –¢–∞–±–ª–∏—Ü–∞ 7 —Å—Ç–æ–ª–±—Ü–æ–≤

**Mobile (d-md-none):**
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- `schedule_by_day = {day: [slots]}`

### 10. –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è

**–í `ScheduleSlotForm.__init__`:**
```python
if 'subject' in self.data:
    subject = Subject.objects.get(id=self.data.get('subject'))
    if subject.teacher:
        self.fields['teacher'].initial = subject.teacher
```

### 11. –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π

**JavaScript —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:**
```javascript
function sortTable(header, columnIndex) {
    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (asc/desc)
    // –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —á–∏—Å–ª–æ
    // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫ –º–∞—Å—Å–∏–≤–∞
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DOM
}
```

**Onclick –Ω–∞ `<tr>`:**
```javascript
onclick="window.location='{% url 'accounts:profile' %}?user_id={{ student.user.id }}'"
```

---

## üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏

```
User ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ> Student ‚îÄ‚îÄ> Group ‚Üê‚îÄ‚îÄ ScheduleSlot ‚îÄ‚îÄ> Subject
       ‚îî‚îÄ‚îÄ> Teacher ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
                                                      ‚îî‚îÄ‚îÄ> (type: LECTURE/PRACTICE/SRSP)

ScheduleSlot ‚îÄ‚îÄ> ScheduleException (1 to many)

AcademicWeek (–≥–ª–æ–±–∞–ª—å–Ω–∞—è, is_active=True)
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ requirements.txt:**
```
python-docx>=0.8.11
```

**–ò–º–ø–æ—Ä—Ç—ã –≤ views.py:**
```python
from docx import Document
from docx.shared import Inches, Pt
from docx.enum.text import WD_ALIGN_PARAGRAPH
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (settings.py)

```python
INSTALLED_APPS = [
    ...
    'schedule.apps.ScheduleConfig',  # –î–û–ë–ê–í–õ–ï–ù–û
]
```

---

## üîÄ URL-–º–∞—Ä—à—Ä—É—Ç—ã (urls.py)

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –≥–ª–∞–≤–Ω—ã–π urls.py:**
```python
path('schedule/', include('schedule.urls')),
```

**–í schedule/urls.py (11 –º–∞—Ä—à—Ä—É—Ç–æ–≤):**
```python
app_name = 'schedule'

urlpatterns = [
    path('', views.schedule_view, name='view'),
    path('today/', views.today_classes, name='today'),
    path('export/', views.export_schedule, name='export'),
    path('constructor/', views.schedule_constructor, name='constructor'),
    path('slot/add/', views.add_schedule_slot, name='add_slot'),
    path('slot/<int:slot_id>/edit/', views.edit_schedule_slot, name='edit_slot'),
    path('slot/<int:slot_id>/delete/', views.delete_schedule_slot, name='delete_slot'),
    path('slot/<int:slot_id>/exceptions/', views.manage_exceptions, name='manage_exceptions'),
    path('exception/<int:exception_id>/delete/', views.delete_exception, name='delete_exception'),
    path('academic-week/', views.manage_academic_week, name='manage_academic_week'),
    path('groups/', views.group_list, name='group_list'),
]
```

---

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```html
<table class="table table-bordered">
    <thead>
        <tr class="table-primary">
            <th>–í—Ä–µ–º—è</th>
            <th>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</th>
            ...
        </tr>
    </thead>
    <tbody>
        {% regroup schedule_slots|dictsort:"start_time" by start_time %}
        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ -->
    </tbody>
</table>
```

### –í–∏–¥–∂–µ—Ç "–°–µ–≥–æ–¥–Ω—è"
```html
{% for class in classes %}
    {% with is_current=class.start_time <= current_time and class.end_time >= current_time %}
        <div class="{% if is_current %}border-success{% endif %}">
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        </div>
    {% endwith %}
{% endfor %}
```

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (—Å–µ—Ç–∫–∞)
```python
schedule_grid[day_of_week][time_tuple] = slot_object

# –í —à–∞–±–ª–æ–Ω–µ:
{% for day_num in "012345" %}
    <td>
        {% if schedule_grid[day_num][time_slot] %}
            <!-- –ó–∞–Ω—è—Ç–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        {% endif %}
    </td>
{% endfor %}
```

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–¥–ª—è –∑–∞–ø—É—Å–∫–∞)

**–ú–∏–Ω–∏–º—É–º –¥–ª—è —Ä–∞–±–æ—Ç—ã:**
1. –°–æ–∑–¥–∞—Ç—å Group —á–µ—Ä–µ–∑ admin
2. –°–æ–∑–¥–∞—Ç—å Teacher (—É–∂–µ –µ—Å—Ç—å –∏–∑ –ê–≥–µ–Ω—Ç–∞ 1)
3. –°–æ–∑–¥–∞—Ç—å Subject —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ Teacher
4. –°–æ–∑–¥–∞—Ç—å AcademicWeek (–¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å–µ–º–µ—Å—Ç—Ä–∞)
5. –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–æ–±–∞–≤–∏—Ç—å ScheduleSlot

**–ö–æ–º–∞–Ω–¥—ã –º–∏–≥—Ä–∞—Ü–∏–π:**
```bash
python manage.py makemigrations schedule
python manage.py migrate
```

---

## üöÄ –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤

### –î–ª—è –ê–≥–µ–Ω—Ç–∞ 3 (–û—Ü–µ–Ω–∫–∏):
```python
# –í Student.get_average_grade():
from grades.models import Grade
return Grade.objects.filter(student=self).aggregate(Avg('score'))['score__avg'] or 0.0

# –í Student.get_group_rank():
# –õ–æ–≥–∏–∫–∞ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É –±–∞–ª–ª—É
```

### –î–ª—è –ê–≥–µ–Ω—Ç–∞ 4 (–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å):
```python
# –í dashboard –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å:
attendance_percentage = Attendance.get_percentage(student)

# –í –ø—Ä–æ—Ñ–∏–ª–µ —Å—Ç—É–¥–µ–Ω—Ç–∞:
attendance_calendar = Attendance.get_calendar(student, month, year)
```

### –î–ª—è –ê–≥–µ–Ω—Ç–∞ 5 (–ü—Ä–µ–¥–º–µ—Ç—ã/–£—á–µ–±–Ω—ã–µ –ø–ª–∞–Ω—ã):
```python
# –°–≤—è–∑–∞—Ç—å Subject —Å Curriculum:
curriculum: ForeignKey(Curriculum)

# –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–æ –≥—Ä—É–ø–ø–µ
subjects = Subject.objects.filter(curriculum=group.curriculum)
```

---

## ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–≥–µ–Ω—Ç–∞

- [ ] –ú–æ–¥–µ–ª–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –¥–µ–∫–∞–Ω—É
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
- [ ] –í–∏–¥–∂–µ—Ç "–°–µ–≥–æ–¥–Ω—è" –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ DOCX —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- [ ] –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] python-docx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

## üîß –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏ (–¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

1. `Student.get_average_grade()` ‚Üí return 0.0
2. `Student.get_group_rank()` ‚Üí return 0
3. –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ ‚Üí "–ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"
4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ –¥–µ–∫–∞–Ω–∞ ‚Üí "‚Äî"

**–≠—Ç–∏ –º–µ—Ç–æ–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏.**

---

## üìù –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 20
- **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 6
- **–ù–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π:** 4
- **View-—Ñ—É–Ω–∫—Ü–∏–π:** 11
- **URL-–º–∞—Ä—à—Ä—É—Ç–æ–≤:** 11
- **–®–∞–±–ª–æ–Ω–æ–≤:** 9
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~2500

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ